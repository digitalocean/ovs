'\" pt
.TH Open_vSwitch 5 "January 2011" "Open vSwitch" "Open vSwitch Manual"
.\" -*- nroff -*-
.de TQ
.  br
.  ns
.  TP "\\$1"
..
.de ST
.  PP
.  RS -0.15in
.  I "\\$1"
.  RE
..
.SH "Open_vSwitch DATABASE"
A database with this schema holds the configuration for one Open
vSwitch daemon.  The root of the configuration for the daemon is
the \fBOpen_vSwitch\fR table, which must have exactly one
record.  Records in other tables are significant only when they
can be reached directly or indirectly from the
\fBOpen_vSwitch\fR table.
.sp
.ce 1
\fBOpen_vSwitch\fR Database Tables:
.TS
center box;
l | l
lb | l.
Table	Purpose
=
Open_vSwitch	Open vSwitch configuration.
Bridge	Bridge configuration.
Port	Port configuration.
Interface	One physical network device in a Port.
QoS	Quality of Service configuration
Queue	QoS output queue.
Monitor	Connectivity Monitor configuration
Maintenance_Point	Maintenance Point configuration
Mirror	Port mirroring (SPAN/RSPAN).
Controller	OpenFlow controller configuration.
Manager	OVSDB management connection.
NetFlow	NetFlow configuration.
SSL	SSL configuration.
sFlow	sFlow configuration.
Capability	Capability configuration.
.TE
.sp 1
.SH "TABLE RELATIONSHIPS"
.PP
The following diagram shows the relationship among tables in the
database.  Each node represents a table.  Each edge leads from the
table that contains it and points to the table that its value
represents.  Edges are labeled with their column names.
.RS -1in
.\" Generated from vswitch.gv with cksum "3734436941 2390"
.PS
linethick = 1;
box at 2.320997253,3.1110975 wid 0.5020540998 height 0.296295 "Bridge"
box at 0.2304523251,2.37036 wid 0.4609046502 height 0.296295 "sFlow"
box at 0.847759254,2.37036 wid 0.4855919496 height 0.296295 "Mirror"
box at 2.320997253,2.37036 wid 0.4444425 height 0.296295 "Port"
box at 3.045260751,2.37036 wid 0.707789496 height 0.296295 "Controller"
box at 3.851835,2.37036 wid 0.609064002 height 0.296295 "NetFlow"
box at 2.057590998,1.6296225 wid 0.4444425 height 0.296295 "QoS"
box at 1.991754249,0.888885 wid 0.5102851749 height 0.296295 "Queue"
box at 2.938238997,0.888885 wid 0.5761278498 height 0.296295 "Monitor"
box at 2.938238997,0.1481475 wid 1.218128004 height 0.296295 "Maintenance_Point"
box at 3.637850751,3.851835 wid 0.954721749 height 0.296295 "Open_vSwitch"
box at 3.061734753,3.1110975 wid 0.699611754 height 0.296295 "Capability"
box at 4.22220375,3.1110975 wid 0.4444425 height 0.296295 "SSL"
box at 4.905341502,3.1110975 wid 0.633715746 height 0.296295 "Manager"
box at 2.872402248,1.6296225 wid 0.641952747 height 0.296295 "Interface"
spline -> from 2.072227971,3.066534732 to 2.072227971,3.066534732 to 1.825829049,3.018534942 to 1.439934441,2.932787169 to 1.119343251,2.8148025 to 0.887818338,2.729588058 to 0.637567581,2.60087751 to 0.4617876093,2.503870527
"sflow" at 1.271579622,2.74072875
spline -> from 2.071042791,2.98546842 to 2.071042791,2.98546842 to 1.796021772,2.847157914 to 1.357208877,2.626536657 to 1.086632283,2.490477993
"mirrors" at 1.9259175,2.74072875
spline -> from 2.320997253,2.96117223 to 2.320997253,2.96117223 to 2.320997253,2.832698718 to 2.320997253,2.648462487 to 2.320997253,2.520048234
"ports" at 2.469144753,2.74072875
spline -> from 2.495218713,2.960816676 to 2.495218713,2.960816676 to 2.546240712,2.915068728 to 2.601410841,2.863868952 to 2.650180998,2.8148025 to 2.743336146,2.721054762 to 2.842120899,2.609944137 to 2.917557606,2.522300076
"controller" at 3.065823624,2.74072875
spline -> from 2.571070233,2.988964701 to 2.571070233,2.988964701 to 2.594773833,2.979424002 to 2.61865521,2.970594411 to 2.641943997,2.96295 to 2.957675949,2.859720822 to 3.079038381,2.966624058 to 3.374444496,2.8148025 to 3.514473513,2.742862074 to 3.643184061,2.618003361 to 3.731598489,2.518922313
"netflow" at 3.802472253,2.74072875
spline -> from 1.091017449,2.37036 to 1.091017449,2.37036 to 1.370542152,2.37036 to 1.825414236,2.37036 to 2.096701938,2.37036
"select_src_port" at 1.588496754,2.44443375
spline -> from 1.067787921,2.221501392 to 1.067787921,2.221501392 to 1.095284097,2.208345894 to 1.123787676,2.197086684 to 1.152231996,2.189264496 to 1.526156286,2.08650939 to 1.651429812,2.084257548 to 2.024702253,2.189264496 to 2.052553983,2.197145943 to 2.080346454,2.208405153 to 2.107190781,2.221501392
"output_port" at 1.588496754,2.263338246
spline -> from 0.905240484,2.221264356 to 0.905240484,2.221264356 to 0.953892123,2.117798142 to 1.034780658,1.987843155 to 1.152231996,1.9259175 to 1.495282347,1.745118291 to 1.682837082,1.742984967 to 2.024702253,1.9259175 to 2.140790634,1.988080191 to 2.21924955,2.117975919 to 2.266123419,2.221442133
"select_dst_port" at 1.588496754,1.99999125
spline -> from 2.267664153,2.22043473 to 2.267664153,2.22043473 to 2.221975464,2.091961218 to 2.156494269,1.907724987 to 2.11080558,1.779310734
"qos" at 2.312760252,1.99999125
spline -> from 2.43258195,2.22043473 to 2.43258195,2.22043473 to 2.528225976,2.091961218 to 2.665351302,1.907724987 to 2.760995328,1.779310734
"interfaces" at 2.930001996,1.99999125
spline -> from 2.023220778,1.479637971 to 2.023220778,1.479637971 to 2.013917115,1.433001138 to 2.005028265,1.381268031 to 1.99999125,1.3333275 to 1.989620925,1.235076078 to 1.98754686,1.123965453 to 1.988080191,1.037447313
"queues value" at 2.378597001,1.25925375
spline -> from 2.938238997,0.73895973 to 2.938238997,0.73895973 to 2.938238997,0.610486218 to 2.938238997,0.4262736906 to 2.938238997,0.2978238822
"remote_mps" at 3.288044874,0.51851625
spline -> from 3.159808398,3.796309317 to 3.159808398,3.796309317 to 2.96591295,3.754828017 to 2.749321305,3.682295001 to 2.584344249,3.55554 to 2.486211345,3.480162552 to 2.417352387,3.356903832 to 2.374685907,3.259245
"bridges" at 2.790091497,3.48146625
spline -> from 3.219067398,3.702146766 to 3.219067398,3.702146766 to 3.159926916,3.663332121 to 3.106830852,3.615095295 to 3.069971754,3.55554 to 3.015927546,3.468251493 to 3.015809028,3.35168904 to 3.028194159,3.25983759
"capabilities value" at 3.55554,3.48146625
spline -> from 3.884901522,3.703568982 to 3.884901522,3.703568982 to 3.941612385,3.661080279 to 3.997849176,3.611065683 to 4.041108246,3.55554 to 4.109256096,3.468132975 to 4.155478116,3.351570522 to 4.184159472,3.259778331
"ssl" at 4.205729748,3.48146625
spline -> from 4.020249078,3.702146766 to 4.020249078,3.702146766 to 4.117848651,3.659065473 to 4.22101857,3.609110136 to 4.312751502,3.55554 to 4.46042493,3.469258896 to 4.614616848,3.352696443 to 4.728690423,3.260548698
"manager_options" at 5.024689128,3.48146625
spline -> from 2.885735523,1.47969723 to 2.885735523,1.47969723 to 2.89717251,1.351223718 to 2.913527994,1.166987487 to 2.924964981,1.038573234
"monitor" at 3.139897374,1.25925375
.PE
.RE
.bp
.SS "Open_vSwitch Table"
Configuration for an Open vSwitch daemon.  There must be exactly one record
in the \fBOpen_vSwitch\fR table.
.sp
.ce 1
\fBOpen_vSwitch\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
.T&
li | s
l | l.
Configuration
_
\ \ \fBbridges\fR	T{
set of \fBBridge\fRs
T}
\ \ \fBssl\fR	T{
optional \fBSSL\fR
T}
\ \ \fBexternal_ids\fR	T{
map of string-string pairs
T}
_
.T&
li | s
l | l.
Status
_
\ \ \fBnext_cfg\fR	T{
integer
T}
\ \ \fBcur_cfg\fR	T{
integer
T}
\ \ \fBcapabilities\fR	T{
map of string-\fBCapability\fR pairs
T}
\ \ \fBstatistics\fR	T{
map of string-string pairs
T}
_
.T&
li | s
l | l.
Version Reporting
_
\ \ \fBovs_version\fR	T{
optional string
T}
\ \ \fBdb_version\fR	T{
optional string
T}
\ \ \fBsystem_type\fR	T{
optional string
T}
\ \ \fBsystem_version\fR	T{
optional string
T}
_
.T&
li | s
l | l.
Database Configuration
_
\ \ \fBmanager_options\fR	T{
set of \fBManager\fRs
T}
\ \ \fBmanagers\fR	T{
set of strings
T}
.TE
.ST "Configuration:"
.IP "\fBbridges\fR: set of \fBBridge\fRs"
Set of bridges managed by the daemon.
.IP "\fBssl\fR: optional \fBSSL\fR"
SSL used globally by the daemon.
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate
with Open vSwitch, rather than by Open vSwitch itself.  System
integrators should either use the Open vSwitch development
mailing list to coordinate on common key-value definitions, or
choose key names that are likely to be unique.  The currently
defined common key-value pairs are:
.RS
.TP
\fBsystem\-id\fR
A unique identifier for the Open vSwitch\(cqs physical host.
The form of the identifier depends on the type of the host.
On a Citrix XenServer, this will likely be the same as
\fBxs\-system\-uuid\fR\.
.TP
\fBxs\-system\-uuid\fR
The Citrix XenServer universally unique identifier for the
physical host as displayed by \fBxe host\-list\fR\.
.RE
.ST "Status:"
.IP "\fBnext_cfg\fR: integer"
Sequence number for client to increment.  When a client modifies
any part of the database configuration and wishes to wait for
Open vSwitch to finish applying the changes, it may increment
this sequence number.
.IP "\fBcur_cfg\fR: integer"
Sequence number that Open vSwitch sets to the current value of
\fBnext_cfg\fR after it finishes applying a set of
configuration changes.
.IP "\fBcapabilities\fR: map of string-\fBCapability\fR pairs"
Describes functionality supported by the hardware and software platform
on which this Open vSwitch is based.  Clients should not modify this
column.  See the \fBCapability\fR description for defined
capability categories and the meaning of associated
\fBCapability\fR records.
.IP "\fBstatistics\fR: map of string-string pairs"
Key-value pairs that report statistics about a system running an Open
vSwitch.  These are updated periodically (currently, every 5
seconds).  Key-value pairs that cannot be determined or that do not
apply to a platform are omitted.
.RS
.TP
\fBcpu\fR
Number of CPU processors, threads, or cores currently online and
available to the operating system on which Open vSwitch is
running, as an integer.  This may be less than the number
installed, if some are not online or if they are not available to
the operating system.
.IP
Open vSwitch userspace processes are not multithreaded, but the
Linux kernel-based datapath is.
.TP
\fBload_average\fR
A comma-separated list of three floating-point numbers,
representing the system load average over the last 1, 5, and 15
minutes, respectively.
.TP
\fBmemory\fR
A comma-separated list of integers, each of which represents a
quantity of memory in kilobytes that describes the operating
system on which Open vSwitch is running.  In respective order,
these values are:
.RS
.IP 1. .25in
Total amount of RAM allocated to the OS.
.IP 2. .25in
RAM allocated to the OS that is in use.
.IP 3. .25in
RAM that can be flushed out to disk or otherwise discarded
if that space is needed for another purpose.  This number is
necessarily less than or equal to the previous value.
.IP 4. .25in
Total disk space allocated for swap.
.IP 5. .25in
Swap space currently in use.
.RE
.IP
On Linux, all five values can be determined and are included.  On
other operating systems, only the first two values can be
determined, so the list will only have two values.
.TP
\fBprocess_\fR\fIname\fR
One such key-value pair will exist for each running Open vSwitch
daemon process, with \fIname\fR replaced by the daemon\(cqs
name (e.g. \fBprocess_ovs\-vswitchd\fR).  The value is a
comma-separated list of integers.  The integers represent the
following, with memory measured in kilobytes and durations in
milliseconds:
.RS
.IP 1. .25in
The process\(cqs virtual memory size.
.IP 2. .25in
The process\(cqs resident set size.
.IP 3. .25in
The amount of user and system CPU time consumed by the
process.
.IP 4. .25in
The number of times that the process has crashed and been
automatically restarted by the monitor.
.IP 5. .25in
The duration since the process was started.
.IP 6. .25in
The duration for which the process has been running.
.RE
.IP
The interpretation of some of these values depends on whether the
process was started with the \fB\-\-monitor\fR\.  If it
was not, then the crash count will always be 0 and the two
durations will always be the same.  If \fB\-\-monitor\fR
was given, then the crash count may be positive; if it is, the
latter duration is the amount of time since the most recent crash
and restart.
.IP
There will be one key-value pair for each file in Open vSwitch\(cqs
``run directory\(cq\(cq (usually \fB/var/run/openvswitch\fR)
whose name ends in \fB\.pid\fR, whose contents are a
process ID, and which is locked by a running process.  The
\fIname\fR is taken from the pidfile\(cqs name.
.IP
Currently Open vSwitch is only able to obtain all of the above
detail on Linux systems.  On other systems, the same key-value
pairs will be present but the values will always be the empty
string.
.TP
\fBfile_systems\fR
A space-separated list of information on local, writable file
systems.  Each item in the list describes one file system and
consists in turn of a comma-separated list of the following:
.RS
.IP 1. .25in
Mount point, e.g. \fB/\fR or \fB/var/log\fR\.
Any spaces or commas in the mount point are replaced by
underscores.
.IP 2. .25in
Total size, in kilobytes, as an integer.
.IP 3. .25in
Amount of storage in use, in kilobytes, as an integer.
.RE
.IP
This key-value pair is omitted if there are no local, writable
file systems or if Open vSwitch cannot obtain the needed
information.
.RE
.ST "Version Reporting:"
These columns report the types and versions of the hardware and
software running Open vSwitch.  We recommend in general that software
should test whether specific features are supported instead of relying
on version number checks.  These values are primarily intended for
reporting to human administrators.
.IP "\fBovs_version\fR: optional string"
The Open vSwitch version number, e.g. \fB1.1.0pre2\fR\.
If Open vSwitch was configured with a build number, then it is
also included, e.g. \fB1.1.0pre2+build4948\fR\.
.IP "\fBdb_version\fR: optional string"
The database schema version number in the form
\fB\fImajor\fB\.\fIminor\fB\.\fItweak\fB\fR,
e.g. \fB1.2.3\fR\.  Whenever the database schema is changed in
a non-backward compatible way (e.g. deleting a column or a table),
\fImajor\fR is incremented.  When the database schema is changed
in a backward compatible way (e.g. adding a new column),
\fIminor\fR is incremented.  When the database schema is changed
cosmetically (e.g. reindenting its syntax), \fItweak\fR is
incremented.
.IP
The schema version is part of the database schema, so it can also be
retrieved by fetching the schema using the Open vSwitch database
protocol.
.IP "\fBsystem_type\fR: optional string"
An identifier for the type of system on top of which Open vSwitch
runs, e.g. \fBXenServer\fR or \fBKVM\fR\.
.IP
System integrators are responsible for choosing and setting an
appropriate value for this column.
.IP "\fBsystem_version\fR: optional string"
The version of the system identified by \fBsystem_type\fR,
e.g. \fB5.5.0\-24648p\fR on XenServer 5.5.0 build 24648.
.IP
System integrators are responsible for choosing and setting an
appropriate value for this column.
.ST "Database Configuration:"
These columns primarily configure the Open vSwitch database
(\fBovsdb\-server\fR), not the Open vSwitch switch
(\fBovs\-vswitchd\fR).  The OVSDB database also uses the \fBssl\fR settings.
.PP
The Open vSwitch switch does read the database configuration to
determine remote IP addresses to which in-band control should apply.
.IP "\fBmanager_options\fR: set of \fBManager\fRs"
Database clients to which the Open vSwitch database server should
connect or to which it should listen, along with options for how these
connection should be configured.  See the \fBManager\fR table
for more information.
.IP "\fBmanagers\fR: set of strings"
Remote database clients to which the Open vSwitch\(cqs database server
should connect or to which it should listen.  Adding an OVSDB target
to this set is equivalent to adding it to \fBmanager_options\fR with all of the default options.
.IP
Use of this column is deprecated and may be removed sometime in the
future.  New applications should use and set \fBmanager_options\fR instead.
.bp
.SS "Bridge Table"
Configuration for a bridge within an
\fBOpen_vSwitch\fR\.
.PP
A \fBBridge\fR record represents an Ethernet switch with one or
more ``ports,\(cq\(cq which are the \fBPort\fR records pointed to by
the \fBBridge\fR\(cqs \fBports\fR column.
.sp
.ce 1
\fBBridge\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
.T&
li | s
l | l.
Core Features
_
\ \ \fBname\fR	T{
string
T}
\ \ \fBports\fR	T{
set of \fBPort\fRs
T}
\ \ \fBmirrors\fR	T{
set of \fBMirror\fRs
T}
\ \ \fBnetflow\fR	T{
optional \fBNetFlow\fR
T}
\ \ \fBsflow\fR	T{
optional \fBsFlow\fR
T}
\ \ \fBflood_vlans\fR	T{
set of up to 4096 integers, in range 0 to 4,095
T}
_
.T&
li | s
l | l.
OpenFlow Configuration
_
\ \ \fBcontroller\fR	T{
set of \fBController\fRs
T}
\ \ \fBfail_mode\fR	T{
optional string, either \fBsecure\fR or \fBstandalone\fR
T}
\ \ \fBdatapath_id\fR	T{
optional string
T}
_
.T&
li | s
l | l.
Other Features
_
\ \ \fBdatapath_type\fR	T{
string
T}
\ \ \fBexternal_ids\fR	T{
map of string-string pairs
T}
\ \ \fBother_config\fR	T{
map of string-string pairs
T}
.TE
.ST "Core Features:"
.IP "\fBname\fR: string"
Bridge identifier.  Should be alphanumeric and no more than about 8
bytes long.  Must be unique among the names of ports, interfaces, and
bridges on a host.
.IP "\fBports\fR: set of \fBPort\fRs"
Ports included in the bridge.
.IP "\fBmirrors\fR: set of \fBMirror\fRs"
Port mirroring configuration.
.IP "\fBnetflow\fR: optional \fBNetFlow\fR"
NetFlow configuration.
.IP "\fBsflow\fR: optional \fBsFlow\fR"
sFlow configuration.
.IP "\fBflood_vlans\fR: set of up to 4096 integers, in range 0 to 4,095"
VLAN IDs of VLANs on which MAC address learning should be disabled, so
that packets are flooded instead of being sent to specific ports that
are believed to contain packets\(cq destination MACs.  This should
ordinarily be used to disable MAC learning on VLANs used for mirroring
(RSPAN VLANs).  It may also be useful for debugging.
.ST "OpenFlow Configuration:"
.IP "\fBcontroller\fR: set of \fBController\fRs"
OpenFlow controller set.  If unset, then no OpenFlow controllers
will be used.
.IP "\fBfail_mode\fR: optional string, either \fBsecure\fR or \fBstandalone\fR"
When a controller is configured, it is, ordinarily, responsible
for setting up all flows on the switch.  Thus, if the connection to
the controller fails, no new network connections can be set up.
If the connection to the controller stays down long enough,
no packets can pass through the switch at all.  This setting
determines the switch\(cqs response to such a situation.  It may be set
to one of the following:
.RS
.TP
\fBstandalone\fR
If no message is received from the controller for three
times the inactivity probe interval
(see \fBinactivity_probe\fR), then Open vSwitch
will take over responsibility for setting up flows.  In
this mode, Open vSwitch causes the bridge to act like an
ordinary MAC-learning switch.  Open vSwitch will continue
to retry connecting to the controller in the background
and, when the connection succeeds, it will discontinue its
standalone behavior.
.TP
\fBsecure\fR
Open vSwitch will not set up flows on its own when the
controller connection fails or when no controllers are
defined.  The bridge will continue to retry connecting to
any defined controllers forever.
.RE
.IP
If this value is unset, the default is implementation-specific.
.IP
When more than one controller is configured,
\fBfail_mode\fR is considered only when none of the
configured controllers can be contacted.
.IP "\fBdatapath_id\fR: optional string"
Reports the OpenFlow datapath ID in use.  Exactly 16 hex
digits.  (Setting this column will have no useful effect.  Set
\fBother_config\fR:\fBother\-config\fR
instead.)
.ST "Other Features:"
.IP "\fBdatapath_type\fR: string"
Name of datapath provider.  The kernel datapath has
type \fBsystem\fR\.  The userspace datapath has
type \fBnetdev\fR\.
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate
with Open vSwitch, rather than by Open vSwitch itself.  System
integrators should either use the Open vSwitch development
mailing list to coordinate on common key-value definitions, or
choose key names that are likely to be unique.  The currently
defined key-value pairs are:
.RS
.TP
\fBbridge\-id\fR
A unique identifier of the bridge.  On Citrix XenServer this
will commonly be the same as \fBxs\-network\-uuids\fR\.
.TP
\fBxs\-network\-uuids\fR
Semicolon-delimited set of universally unique identifier(s) for
the network with which this bridge is associated on a Citrix
XenServer host.  The network identifiers are RFC 4122 UUIDs as
displayed by, e.g., \fBxe network\-list\fR\.
.RE
.IP "\fBother_config\fR: map of string-string pairs"
Key-value pairs for configuring rarely used bridge
features.  The currently defined key-value pairs are:
.RS
.TP
\fBdatapath\-id\fR
Exactly 16 hex
digits to set the OpenFlow datapath ID to a specific
value.  May not be all-zero.
.TP
\fBdisable\-in\-band\fR
If set to \fBtrue\fR, disable in-band control on
the bridge regardless of controller and manager settings.
.TP
\fBhwaddr\fR
An Ethernet address in the form
\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR
to set the hardware address of the local port and influence the
datapath ID.
.TP
\fBin\-band\-queue\fR
A queue ID as a nonnegative integer.  This sets the OpenFlow queue
ID that will be used by flows set up by in-band control on this
bridge.  If unset, or if the port used by an in-band control flow
does not have QoS configured, or if the port does not have a queue
with the specified ID, the default queue is used instead.
.RE
.bp
.SS "Port Table"
A port within a \fBBridge\fR\.
.PP
Most commonly, a port has exactly one ``interface,\(cq\(cq pointed to by its
\fBinterfaces\fR column.  Such a port logically
corresponds to a port on a physical Ethernet switch.  A port
with more than one interface is a ``bonded port\(cq\(cq (see
\fBBonding Configuration\fR).
.PP
Some properties that one might think as belonging to a port are actually
part of the port\(cqs \fBInterface\fR members.
.sp
.ce 1
\fBPort\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBname\fR	T{
string
T}
\fBinterfaces\fR	T{
set of 1 or more \fBInterface\fRs
T}
_
.T&
li | s
l | l.
VLAN Configuration
_
\ \ \fBtag\fR	T{
optional integer, in range 0 to 4,095
T}
\ \ \fBtrunks\fR	T{
set of up to 4096 integers, in range 0 to 4,095
T}
_
.T&
li | s
l | l.
Bonding Configuration
_
\ \ \fBbond_updelay\fR	T{
integer
T}
\ \ \fBbond_downdelay\fR	T{
integer
T}
\ \ \fBbond_fake_iface\fR	T{
boolean
T}
_
.T&
li | s
l | l.
Other Features
_
\ \ \fBqos\fR	T{
optional \fBQoS\fR
T}
\ \ \fBmac\fR	T{
optional string
T}
\ \ \fBfake_bridge\fR	T{
boolean
T}
\ \ \fBexternal_ids\fR	T{
map of string-string pairs
T}
\ \ \fBother_config\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBname\fR: string"
Port name.  Should be alphanumeric and no more than about 8
bytes long.  May be the same as the interface name, for
non-bonded ports.  Must otherwise be unique among the names of
ports, interfaces, and bridges on a host.
.IP "\fBinterfaces\fR: set of 1 or more \fBInterface\fRs"
The port\(cqs interfaces.  If there is more than one, this is a
bonded Port.
.ST "VLAN Configuration:"
A bridge port must be configured for VLANs in one of two
mutually exclusive ways:
.RS
.IP \bu
A ``trunk port\(cq\(cq has an empty value for \fBtag\fR\.  Its \fBtrunks\fR value may be
empty or non-empty.
.IP \bu
An ``implicitly tagged VLAN port\(cq\(cq or ``access port\(cq\(cq
has an nonempty value for \fBtag\fR\.  Its
\fBtrunks\fR value must be empty.
.RE
If \fBtrunks\fR and \fBtag\fR are both
nonempty, the configuration is ill-formed.
.IP "\fBtag\fR: optional integer, in range 0 to 4,095"
If this is an access port (see above), the port\(cqs implicitly
tagged VLAN.  Must be empty if this is a trunk port.
.IP
Frames arriving on trunk ports will be forwarded to this
port only if they are tagged with the given VLAN (or, if
\fBtag\fR is 0, then if they lack a VLAN header).
Frames arriving on other access ports will be forwarded to
this port only if they have the same \fBtag\fR
value.  Frames forwarded to this port will not have an
802.1Q header.
.IP
When a frame with a 802.1Q header that indicates a nonzero
VLAN is received on an access port, it is discarded.
.IP "\fBtrunks\fR: set of up to 4096 integers, in range 0 to 4,095"
If this is a trunk port (see above), the 802.1Q VLAN(s) that
this port trunks; if it is empty, then the port trunks all
VLANs.  Must be empty if this is an access port.
.IP
Frames arriving on trunk ports are dropped if they are not
in one of the specified VLANs.  For this purpose, packets
that have no VLAN header are treated as part of VLAN 0.
.ST "Bonding Configuration:"
A port that has more than one interface is a ``bonded port.\(cq\(cq
Bonding allows for load balancing and fail-over.  Open vSwitch
supports ``source load balancing\(cq\(cq (SLB) bonding, which
assigns flows to slaves based on source MAC address and output VLAN,
with periodic rebalancing as traffic patterns change.  This form of
bonding does not require 802.3ad or other special support from the
upstream switch to which the slave devices are connected.
.PP
These columns apply only to bonded ports.  Their values are
otherwise ignored.
.IP "\fBbond_updelay\fR: integer"
For a bonded port, the number of milliseconds for which carrier must
stay up on an interface before the interface is considered to be up.
Specify \fB0\fR to enable the interface immediately.
.IP
This setting is honored only when at least one bonded interface is
already enabled.  When no interfaces are enabled, then the first bond
interface to come up is enabled immediately.
.IP "\fBbond_downdelay\fR: integer"
For a bonded port, the number of milliseconds for which carrier must
stay down on an interface before the interface is considered to be
down.  Specify \fB0\fR to disable the interface immediately.
.IP "\fBbond_fake_iface\fR: boolean"
For a bonded port, whether to create a fake internal interface with the
name of the port.  Use only for compatibility with legacy software that
requires this.
.ST "Other Features:"
.IP "\fBqos\fR: optional \fBQoS\fR"
Quality of Service configuration for this port.
.IP "\fBmac\fR: optional string"
The MAC address to use for this port for the purpose of choosing the
bridge\(cqs MAC address.  This column does not necessarily reflect the
port\(cqs actual MAC address, nor will setting it change the port\(cqs actual
MAC address.
.IP "\fBfake_bridge\fR: boolean"
Does this port represent a sub-bridge for its tagged VLAN within the
Bridge?  See ovs-vsctl(8) for more information.
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with
Open vSwitch, rather than by Open vSwitch itself.  System integrators
should either use the Open vSwitch development mailing list to
coordinate on common key-value definitions, or choose key names that
are likely to be unique.
.IP
No key-value pairs native to \fBPort\fR are currently
defined.  For fake bridges (see the \fBfake_bridge\fR
column), external IDs for the fake bridge are defined here by
prefixing a \fBBridge\fR \fBexternal_ids\fR key with \fBfake\-bridge\-\fR,
e.g. \fBfake\-bridge\-xs\-network\-uuids\fR\.
.IP "\fBother_config\fR: map of string-string pairs"
Key-value pairs for configuring rarely used port features.  The
currently defined key-value pairs are:
.RS
.TP
\fBhwaddr\fR
An Ethernet address in the form
\fB\fIxx\fB:\fIxx\fB:\fIxx\fB:\fIxx\fB:\fIxx\fB:\fIxx\fB\fR\.
.TP
\fBbond\-rebalance\-interval\fR
For a bonded port, the number of milliseconds between
successive attempts to rebalance the bond, that is, to
move source MACs and their flows from one interface on
the bond to another in an attempt to keep usage of each
interface roughly equal.  The default is 10000 (10
seconds), and the minimum is 1000 (1 second).
.RE
.bp
.SS "Interface Table"
An interface within a \fBPort\fR\.
.sp
.ce 1
\fBInterface\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
.T&
li | s
l | l.
Core Features
_
\ \ \fBname\fR	T{
string
T}
\ \ \fBmac\fR	T{
optional string
T}
\ \ \fBofport\fR	T{
optional integer
T}
_
.T&
li | s
l | l.
System-Specific Details
_
\ \ \fBtype\fR	T{
string
T}
\ \ \fBoptions\fR	T{
map of string-string pairs
T}
\ \ \fBstatus\fR	T{
map of string-string pairs
T}
_
.T&
li | s
l | l.
Ingress Policing
_
\ \ \fBingress_policing_rate\fR	T{
integer, at least 0
T}
\ \ \fBingress_policing_burst\fR	T{
integer, at least 0
T}
_
.T&
li | s
l | l.
Other Features
_
\ \ \fBmonitor\fR	T{
optional \fBMonitor\fR
T}
\ \ \fBexternal_ids\fR	T{
map of string-string pairs
T}
\ \ \fBtunnel_egress_iface\fR	T{
optional string
T}
\ \ \fBother_config\fR	T{
map of string-string pairs
T}
\ \ \fBstatistics\fR	T{
map of string-integer pairs
T}
.TE
.ST "Core Features:"
.IP "\fBname\fR: string"
Interface name.  Should be alphanumeric and no more than about 8 bytes
long.  May be the same as the port name, for non-bonded ports.  Must
otherwise be unique among the names of ports, interfaces, and bridges
on a host.
.IP "\fBmac\fR: optional string"
Ethernet address to set for this interface.  If unset then the
default MAC address is used:
.RS
.IP \bu
For the local interface, the default is the lowest-numbered MAC
address among the other bridge ports, either the value of the
\fBmac\fR in its \fBPort\fR record,
if set, or its actual MAC (for bonded ports, the MAC of its slave
whose name is first in alphabetical order).  Internal ports and
bridge ports that are used as port mirroring destinations (see the
\fBMirror\fR table) are ignored.
.IP \bu
For other internal interfaces, the default MAC is randomly
generated.
.IP \bu
External interfaces typically have a MAC address associated with
their hardware.
.RE
.IP
Some interfaces may not have a software-controllable MAC
address.
.IP "\fBofport\fR: optional integer"
OpenFlow port number for this interface.  Unlike most columns, this
column\(cqs value should be set only by Open vSwitch itself.  Other
clients should set this column to an empty set (the default) when
creating an \fBInterface\fR\.
.IP
Open vSwitch populates this column when the port number becomes
known.  If the interface is successfully added,
\fBofport\fR will be set to a number between 1 and 65535
(generally either in the range 1 to 65279, inclusive, or 65534, the
port number for the OpenFlow ``local port\(cq\(cq).  If the interface
cannot be added then Open vSwitch sets this column
to -1.
.ST "System-Specific Details:"
.IP "\fBtype\fR: string"
The interface type, one of:
.RS
.TP
\fBsystem\fR
An ordinary network device, e.g. \fBeth0\fR on Linux.
Sometimes referred to as ``external interfaces\(cq\(cq since they are
generally connected to hardware external to that on which the Open
vSwitch is running.  The empty string is a synonym for
\fBsystem\fR\.
.TP
\fBinternal\fR
A simulated network device that sends and receives traffic.  An
internal interface whose \fBname\fR is the same as its
bridge\(cqs \fBname\fR is called the
``local interface.\(cq\(cq  It does not make sense to bond an internal
interface, so the terms ``port\(cq\(cq and ``interface\(cq\(cq are often used
imprecisely for internal interfaces.
.TP
\fBtap\fR
A TUN/TAP device managed by Open vSwitch.
.TP
\fBgre\fR
An Ethernet over RFC 2890 Generic Routing Encapsulation over IPv4
tunnel.  Each tunnel must be uniquely identified by the
combination of \fBremote_ip\fR, \fBlocal_ip\fR, and
\fBin_key\fR\.  Note that if two ports are defined that are
the same except one has an optional identifier and the other does
not, the more specific one is matched first.  \fBin_key\fR
is considered more specific than \fBlocal_ip\fR if a port
defines one and another port defines the other.  The following
options may be specified in the \fBoptions\fR column:
.RS
.TP
\fBremote_ip\fR
Required.  The tunnel endpoint.
.RE
.RS
.TP
\fBlocal_ip\fR
Optional.  The destination IP that received packets must
match.  Default is to match all addresses.
.RE
.RS
.TP
\fBin_key\fR
Optional.  The GRE key that received packets must contain.
It may either be a 32-bit number (no key and a key of 0 are
treated as equivalent) or the word \fBflow\fR\.  If
\fBflow\fR is specified then any key will be accepted
and the key will be placed in the \fBtun_id\fR field
for matching in the flow table.  The ovs-ofctl manual page
contains additional information about matching fields in
OpenFlow flows.  Default is no key.
.RE
.RS
.TP
\fBout_key\fR
Optional.  The GRE key to be set on outgoing packets.  It may
either be a 32-bit number or the word \fBflow\fR\.  If
\fBflow\fR is specified then the key may be set using
the \fBset_tunnel\fR Nicira OpenFlow vendor extension (0
is used in the absence of an action).  The ovs-ofctl manual
page contains additional information about the Nicira OpenFlow
vendor extensions.  Default is no key.
.RE
.RS
.TP
\fBkey\fR
Optional.  Shorthand to set \fBin_key\fR and
\fBout_key\fR at the same time.
.RE
.RS
.TP
\fBtos\fR
Optional.  The value of the ToS bits to be set on the
encapsulating packet.  It may also be the word
\fBinherit\fR, in which case the ToS will be copied from
the inner packet if it is IPv4 or IPv6 (otherwise it will be
0).  Note that the ECN fields are always inherited.  Default is
0.
.RE
.RS
.TP
\fBttl\fR
Optional.  The TTL to be set on the encapsulating packet.
It may also be the word \fBinherit\fR, in which case the
TTL will be copied from the inner packet if it is IPv4 or IPv6
(otherwise it will be the system default, typically 64).
Default is the system default TTL.
.RE
.RS
.TP
\fBcsum\fR
Optional.  Compute GRE checksums on outgoing packets.
Checksums present on incoming packets will be validated
regardless of this setting.  Note that GRE checksums
impose a significant performance penalty as they cover the
entire packet.  As the contents of the packet is typically
covered by L3 and L4 checksums, this additional checksum only
adds value for the GRE and encapsulated Ethernet headers.
Default is disabled, set to \fBtrue\fR to enable.
.RE
.RS
.TP
\fBpmtud\fR
Optional.  Enable tunnel path MTU discovery.  If enabled
``ICMP destination unreachable - fragmentation\(cq\(cq needed
messages will be generated for IPv4 packets with the DF bit set
and IPv6 packets above the minimum MTU if the packet size
exceeds the path MTU minus the size of the tunnel headers.  It
also forces the encapsulating packet DF bit to be set (it is
always set if the inner packet implies path MTU discovery).
Note that this option causes behavior that is typically
reserved for routers and therefore is not entirely in
compliance with the IEEE 802.1D specification for bridges.
Default is enabled, set to \fBfalse\fR to disable.
.RE
.RS
.TP
\fBheader_cache\fR
Optional.  Enable caching of tunnel headers and the output
path.  This can lead to a significant performance increase
without changing behavior.  In general it should not be
necessary to adjust this setting.  However, the caching can
bypass certain components of the IP stack (such as IP tables)
and it may be useful to disable it if these features are
required or as a debugging measure.  Default is enabled, set to
\fBfalse\fR to disable.
.RE
.TP
\fBipsec_gre\fR
An Ethernet over RFC 2890 Generic Routing Encapsulation
over IPv4 IPsec tunnel.  Each tunnel (including those of type
\fBgre\fR) must be uniquely identified by the
combination of \fBremote_ip\fR and
\fBlocal_ip\fR\.  Note that if two ports are defined
that are the same except one has an optional identifier and
the other does not, the more specific one is matched first.
An authentication method of \fBpeer_cert\fR or
\fBpsk\fR must be defined.  The following options may
be specified in the \fBoptions\fR column:
.RS
.TP
\fBremote_ip\fR
Required.  The tunnel endpoint.
.RE
.RS
.TP
\fBlocal_ip\fR
Optional.  The destination IP that received packets must
match.  Default is to match all addresses.
.RE
.RS
.TP
\fBpeer_cert\fR
Required for certificate authentication.  A string
containing the peer\(cqs certificate in PEM format.
Additionally the host\(cqs certificate must be specified
with the \fBcertificate\fR option.
.RE
.RS
.TP
\fBcertificate\fR
Required for certificate authentication.  The name of a
PEM file containing a certificate that will be presented
to the peer during authentication.
.RE
.RS
.TP
\fBprivate_key\fR
Optional for certificate authentication.  The name of
a PEM file containing the private key associated with
\fBcertificate\fR\.  If \fBcertificate\fR
contains the private key, this option may be omitted.
.RE
.RS
.TP
\fBpsk\fR
Required for pre-shared key authentication.  Specifies a
pre-shared key for authentication that must be identical on
both sides of the tunnel.
.RE
.RS
.TP
\fBin_key\fR
Optional.  The GRE key that received packets must contain.
It may either be a 32-bit number (no key and a key of 0 are
treated as equivalent) or the word \fBflow\fR\.  If
\fBflow\fR is specified then any key will be accepted
and the key will be placed in the \fBtun_id\fR field
for matching in the flow table.  The ovs-ofctl manual page
contains additional information about matching fields in
OpenFlow flows.  Default is no key.
.RE
.RS
.TP
\fBout_key\fR
Optional.  The GRE key to be set on outgoing packets.  It may
either be a 32-bit number or the word \fBflow\fR\.  If
\fBflow\fR is specified then the key may be set using
the \fBset_tunnel\fR Nicira OpenFlow vendor extension (0
is used in the absence of an action).  The ovs-ofctl manual
page contains additional information about the Nicira OpenFlow
vendor extensions.  Default is no key.
.RE
.RS
.TP
\fBkey\fR
Optional.  Shorthand to set \fBin_key\fR and
\fBout_key\fR at the same time.
.RE
.RS
.TP
\fBtos\fR
Optional.  The value of the ToS bits to be set on the
encapsulating packet.  It may also be the word
\fBinherit\fR, in which case the ToS will be copied from
the inner packet if it is IPv4 or IPv6 (otherwise it will be
0).  Note that the ECN fields are always inherited.  Default is
0.
.RE
.RS
.TP
\fBttl\fR
Optional.  The TTL to be set on the encapsulating packet.
It may also be the word \fBinherit\fR, in which case the
TTL will be copied from the inner packet if it is IPv4 or IPv6
(otherwise it will be the system default, typically 64).
Default is the system default TTL.
.RE
.RS
.TP
\fBcsum\fR
Optional.  Compute GRE checksums on outgoing packets.
Checksums present on incoming packets will be validated
regardless of this setting.  Note that GRE checksums
impose a significant performance penalty as they cover the
entire packet.  As the contents of the packet is typically
covered by L3 and L4 checksums, this additional checksum only
adds value for the GRE and encapsulated Ethernet headers.
Default is disabled, set to \fBtrue\fR to enable.
.RE
.RS
.TP
\fBpmtud\fR
Optional.  Enable tunnel path MTU discovery.  If enabled
``ICMP destination unreachable - fragmentation\(cq\(cq needed
messages will be generated for IPv4 packets with the DF bit set
and IPv6 packets above the minimum MTU if the packet size
exceeds the path MTU minus the size of the tunnel headers.  It
also forces the encapsulating packet DF bit to be set (it is
always set if the inner packet implies path MTU discovery).
Note that this option causes behavior that is typically
reserved for routers and therefore is not entirely in
compliance with the IEEE 802.1D specification for bridges.
Default is enabled, set to \fBfalse\fR to disable.
.RE
.TP
\fBcapwap\fR
Ethernet tunneling over the UDP transport portion of CAPWAP
(RFC 5415).  This allows interoperability with certain switches
where GRE is not available.  Note that only the tunneling component
of the protocol is implemented.  Due to the non-standard use of
CAPWAP, UDP ports 58881 and 58882 are used as the source and
destinations ports respectivedly.  Each tunnel must be uniquely
identified by the combination of \fBremote_ip\fR and
\fBlocal_ip\fR\.  If two ports are defined that are the same
except one includes \fBlocal_ip\fR and the other does not,
the more specific one is matched first.  CAPWAP support is not
available on all platforms.  Currently it is only supported in the
Linux kernel module with kernel versions >= 2.6.25.  The following
options may be specified in the \fBoptions\fR column:
.RS
.TP
\fBremote_ip\fR
Required.  The tunnel endpoint.
.RE
.RS
.TP
\fBlocal_ip\fR
Optional.  The destination IP that received packets must
match.  Default is to match all addresses.
.RE
.RS
.TP
\fBtos\fR
Optional.  The value of the ToS bits to be set on the
encapsulating packet.  It may also be the word
\fBinherit\fR, in which case the ToS will be copied from
the inner packet if it is IPv4 or IPv6 (otherwise it will be
0).  Note that the ECN fields are always inherited.  Default is
0.
.RE
.RS
.TP
\fBttl\fR
Optional.  The TTL to be set on the encapsulating packet.
It may also be the word \fBinherit\fR, in which case the
TTL will be copied from the inner packet if it is IPv4 or IPv6
(otherwise it will be the system default, typically 64).
Default is the system default TTL.
.RE
.RS
.TP
\fBpmtud\fR
Optional.  Enable tunnel path MTU discovery.  If enabled
``ICMP destination unreachable - fragmentation\(cq\(cq needed
messages will be generated for IPv4 packets with the DF bit set
and IPv6 packets above the minimum MTU if the packet size
exceeds the path MTU minus the size of the tunnel headers.  It
also forces the encapsulating packet DF bit to be set (it is
always set if the inner packet implies path MTU discovery).
Note that this option causes behavior that is typically
reserved for routers and therefore is not entirely in
compliance with the IEEE 802.1D specification for bridges.
Default is enabled, set to \fBfalse\fR to disable.
.RE
.RS
.TP
\fBheader_cache\fR
Optional.  Enable caching of tunnel headers and the output
path.  This can lead to a significant performance increase
without changing behavior.  In general it should not be
necessary to adjust this setting.  However, the caching can
bypass certain components of the IP stack (such as IP tables)
and it may be useful to disable it if these features are
required or as a debugging measure.  Default is enabled, set to
\fBfalse\fR to disable.
.RE
.TP
\fBpatch\fR
A pair of virtual devices that act as a patch cable.  The \fBoptions\fR column must have the following key-value pair:
.RS
.TP
\fBpeer\fR
The \fBname\fR of the \fBInterface\fR for
the other side of the patch.  The named \fBInterface\fR\(cqs own \fBpeer\fR option must specify
this \fBInterface\fR\(cqs name.  That is, the two patch
interfaces must have reversed \fBname\fR and
\fBpeer\fR values.
.RE
.RE
.IP "\fBoptions\fR: map of string-string pairs"
Configuration options whose interpretation varies based on
\fBtype\fR\.
.IP "\fBstatus\fR: map of string-string pairs"
Key-value pairs that report port status.  Supported status
values are \fBtype\fR-dependent.
.IP
The only currently defined key-value pair is:
.RS
.TP
\fBsource_ip\fR
The source IP address used for an IPv4 tunnel end-point,
such as \fBgre\fR or \fBcapwap\fR\.  Not
supported by all implementations.
.RE
.ST "Ingress Policing:"
These settings control ingress policing for packets received on this
interface.  On a physical interface, this limits the rate at which
traffic is allowed into the system from the outside; on a virtual
interface (one connected to a virtual machine), this limits the rate at
which the VM is able to transmit.
.PP
Policing is a simple form of quality-of-service that simply drops
packets received in excess of the configured rate.  Due to its
simplicity, policing is usually less accurate and less effective than
egress QoS (which is configured using the \fBQoS\fR and \fBQueue\fR tables).
.PP
Policing is currently implemented only on Linux.  The Linux
implementation uses a simple ``token bucket\(cq\(cq approach:
.RS
.IP \bu
The size of the bucket corresponds to \fBingress_policing_burst\fR\.  Initially the bucket is full.
.IP \bu
Whenever a packet is received, its size (converted to tokens) is
compared to the number of tokens currently in the bucket.  If the
required number of tokens are available, they are removed and the
packet is forwarded.  Otherwise, the packet is dropped.
.IP \bu
Whenever it is not full, the bucket is refilled with tokens at the
rate specified by \fBingress_policing_rate\fR\.
.RE
.PP
Policing interacts badly with some network protocols, and especially
with fragmented IP packets.  Suppose that there is enough network
activity to keep the bucket nearly empty all the time.  Then this token
bucket algorithm will forward a single packet every so often, with the
period depending on packet size and on the configured rate.  All of the
fragments of an IP packets are normally transmitted back-to-back, as a
group.  In such a situation, therefore, only one of these fragments
will be forwarded and the rest will be dropped.  IP does not provide
any way for the intended recipient to ask for only the remaining
fragments.  In such a case there are two likely possibilities for what
will happen next: either all of the fragments will eventually be
retransmitted (as TCP will do), in which case the same problem will
recur, or the sender will not realize that its packet has been dropped
and data will simply be lost (as some UDP-based protocols will do).
Either way, it is possible that no forward progress will ever occur.
.IP "\fBingress_policing_rate\fR: integer, at least 0"
Maximum rate for data received on this interface, in kbps.  Data
received faster than this rate is dropped.  Set to \fB0\fR
(the default) to disable policing.
.IP "\fBingress_policing_burst\fR: integer, at least 0"
Maximum burst size for data received on this interface, in kb.  The
default burst size if set to \fB0\fR is 1000 kb.  This value
has no effect if \fBingress_policing_rate\fR
is \fB0\fR\.
.IP
Specifying a larger burst size lets the algorithm be more forgiving,
which is important for protocols like TCP that react severely to
dropped packets.  The burst size should be at least the size of the
interface\(cqs MTU.  Specifying a value that is numerically at least as
large as 10% of \fBingress_policing_rate\fR helps TCP come
closer to achieving the full rate.
.ST "Other Features:"
.IP "\fBmonitor\fR: optional \fBMonitor\fR"
Connectivity monitor configuration for this interface.
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate
with Open vSwitch, rather than by Open vSwitch itself.  System
integrators should either use the Open vSwitch development
mailing list to coordinate on common key-value definitions, or
choose key names that are likely to be unique.  The currently
defined common key-value pairs are:
.RS
.TP
\fBattached\-mac\fR
The MAC address programmed into the ``virtual hardware\(cq\(cq for this
interface, in the form
\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR:\fIxx\fR\.
For Citrix XenServer, this is the value of the \fBMAC\fR
field in the VIF record for this interface.
.TP
\fBiface\-id\fR
A system-unique identifier for the interface.  On XenServer,
this will commonly be the same as \fBxs\-vif\-uuid\fR\.
.RE
.IP
Additionally the following key-value pairs specifically
apply to an interface that represents a virtual Ethernet interface
connected to a virtual machine.  These key-value pairs should not be
present for other types of interfaces.  Keys whose names end
in \fB\-uuid\fR have values that uniquely identify the entity
in question.  For a Citrix XenServer hypervisor, these values are
UUIDs in RFC 4122 format.  Other hypervisors may use other
formats.
.IP
The currently defined key-value pairs for XenServer are:
.RS
.TP
\fBxs\-vif\-uuid\fR
The virtual interface associated with this interface.
.TP
\fBxs\-network\-uuid\fR
The virtual network to which this interface is attached.
.TP
\fBxs\-vm\-uuid\fR
The VM to which this interface belongs.
.RE
.IP "\fBtunnel_egress_iface\fR: optional string"
Egress interface for tunnels.  Currently only relevant for GRE and
CAPWAP tunnels.  On Linux systems, this column will show the name of
the interface which is responsible for routing traffic destined for the
configured \fBremote_ip\fR\.  This could be an internal interface
such as a bridge port.
.IP "\fBother_config\fR: map of string-string pairs"
Key-value pairs for rarely used interface features.  Currently,
there are none defined.
.IP "\fBstatistics\fR: map of string-integer pairs"
Key-value pairs that report interface statistics.  The current
implementation updates these counters periodically.  In the future,
we plan to, instead, update them when an interface is created, when
they are queried (e.g. using an OVSDB \fBselect\fR operation),
and just before an interface is deleted due to virtual interface
hot-unplug or VM shutdown, and perhaps at other times, but not on any
regular periodic basis.
.IP
The currently defined key-value pairs are listed below.  These are
the same statistics reported by OpenFlow in its \fBstruct
ofp_port_stats\fR structure.  If an interface does not support a
given statistic, then that pair is omitted.
.RS
.IP \bu
Successful transmit and receive counters:
.RS
.TP
\fBrx_packets\fR
Number of received packets.
.TP
\fBrx_bytes\fR
Number of received bytes.
.TP
\fBtx_packets\fR
Number of transmitted packets.
.TP
\fBtx_bytes\fR
Number of transmitted bytes.
.RE
.IP \bu
Receive errors:
.RS
.TP
\fBrx_dropped\fR
Number of packets dropped by RX.
.TP
\fBrx_frame_err\fR
Number of frame alignment errors.
.TP
\fBrx_over_err\fR
Number of packets with RX overrun.
.TP
\fBrx_crc_err\fR
Number of CRC errors.
.TP
\fBrx_errors\fR
Total number of receive errors, greater than or equal
to the sum of the above.
.RE
.IP \bu
Transmit errors:
.RS
.TP
\fBtx_dropped\fR
Number of packets dropped by TX.
.TP
\fBcollisions\fR
Number of collisions.
.TP
\fBtx_errors\fR
Total number of transmit errors, greater
than or equal to the sum of the above.
.RE
.RE
.bp
.SS "QoS Table"
Quality of Service (QoS) configuration for each Port that
references it.
.sp
.ce 1
\fBQoS\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBtype\fR	T{
string
T}
\fBqueues\fR	T{
map of integer-\fBQueue\fR pairs, key in range 0 to 4,294,967,295
T}
\fBother_config\fR	T{
map of string-string pairs
T}
\fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBtype\fR: string"
The type of QoS to implement.  The \fBcapabilities\fR column in the \fBOpen_vSwitch\fR table
identifies the types that a switch actually supports.  The currently
defined types are listed below:
.RS
.TP
\fBlinux\-htb\fR
Linux ``hierarchy token bucket\(cq\(cq classifier.  See tc-htb(8) (also at
\fBhttp://linux.die.net/man/8/tc\-htb\fR) and the HTB manual
(\fBhttp://luxik.cdi.cz/~devik/qos/htb/manual/userg.htm\fR)
for information on how this classifier works and how to configure it.
.RE
.RS
.TP
\fBlinux\-hfsc\fR
Linux \(dqHierarchical Fair Service Curve\(dq classifier.
See \fBhttp://linux\-ip.net/articles/hfsc.en/\fR for
information on how this classifier works.
.RE
.IP "\fBqueues\fR: map of integer-\fBQueue\fR pairs, key in range 0 to 4,294,967,295"
A map from queue numbers to \fBQueue\fR records.  The
supported range of queue numbers depend on \fBtype\fR\.  The
queue numbers are the same as the \fBqueue_id\fR used in
OpenFlow in \fBstruct ofp_action_enqueue\fR and other
structures.  Queue 0 is used by OpenFlow output actions that do not
specify a specific queue.
.IP "\fBother_config\fR: map of string-string pairs"
Key-value pairs for configuring QoS features that depend on
\fBtype\fR\.
.IP
The \fBlinux\-htb\fR and \fBlinux\-hfsc\fR classes support
the following key-value pairs:
.RS
.TP
\fBmax\-rate\fR
Maximum rate shared by all queued traffic, in bit/s.
Optional.  If not specified, for physical interfaces, the
default is the link rate.  For other interfaces or if the
link rate cannot be determined, the default is currently 100
Mbps.
.RE
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "Queue Table"
A configuration for a port output queue, used in configuring Quality of
Service (QoS) features.  May be referenced by \fBqueues\fR column in \fBQoS\fR table.
.sp
.ce 1
\fBQueue\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBother_config\fR	T{
map of string-string pairs
T}
\fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBother_config\fR: map of string-string pairs"
Key-value pairs for configuring the output queue.  The supported
key-value pairs and their meanings depend on the \fBtype\fR
of the \fBQoS\fR records that reference this row.
.IP
The key-value pairs defined for \fBQoS\fR \fBtype\fR of \fBmin\-rate\fR are:
.RS
.TP
\fBmin\-rate\fR
Minimum guaranteed bandwidth, in bit/s.  Required.  The
floor value is 1500 bytes/s (12,000 bit/s).
.RE
.IP
The key-value pairs defined for \fBQoS\fR \fBtype\fR of \fBlinux\-htb\fR are:
.RS
.TP
\fBmin\-rate\fR
Minimum guaranteed bandwidth, in bit/s.  Required.
.TP
\fBmax\-rate\fR
Maximum allowed bandwidth, in bit/s.  Optional.  If specified, the
queue\(cqs rate will not be allowed to exceed the specified value, even
if excess bandwidth is available.  If unspecified, defaults to no
limit.
.TP
\fBburst\fR
Burst size, in bits.  This is the maximum amount of ``credits\(cq\(cq
that a queue can accumulate while it is idle.  Optional.  Details of
the \fBlinux\-htb\fR implementation require a minimum burst
size, so a too-small \fBburst\fR will be silently
ignored.
.TP
\fBpriority\fR
A nonnegative 32-bit integer.  Defaults to 0 if
unspecified.  A queue with a smaller \fBpriority\fR
will receive all the excess bandwidth that it can use before
a queue with a larger value receives any.  Specific priority
values are unimportant; only relative ordering matters.
.RE
.IP
The key-value pairs defined for \fBQoS\fR \fBtype\fR of \fBlinux\-hfsc\fR are:
.RS
.TP
\fBmin\-rate\fR
Minimum guaranteed bandwidth, in bit/s.  Required.
.TP
\fBmax\-rate\fR
Maximum allowed bandwidth, in bit/s.  Optional.  If specified, the
queue\(cqs rate will not be allowed to exceed the specified value, even
if excess bandwidth is available.  If unspecified, defaults to no
limit.
.RE
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "Monitor Table"
A \fBMonitor\fR attaches to an \fBInterface\fR to
implement 802.1ag Connectivity Fault Management (CFM).  CFM allows a
group of Maintenance Points (MPs) called a Maintenance Association (MA)
to detect connectivity problems with each other.  MPs within a MA should
have complete and exclusive interconnectivity.  This is verified by
occasionally broadcasting Continuity Check Messages (CCMs) at a
configurable transmission interval.  A \fBMonitor\fR is
responsible for collecting data about other MPs in its MA and
broadcasting CCMs.
.sp
.ce 1
\fBMonitor\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
.T&
li | s
l | l.
Monitor Configuration
_
\ \ \fBmpid\fR	T{
integer, in range 1 to 8,191
T}
\ \ \fBremote_mps\fR	T{
set of \fBMaintenance_Point\fRs
T}
\ \ \fBma_name\fR	T{
optional string, between 1 and 43 characters long
T}
\ \ \fBmd_name\fR	T{
optional string, between 1 and 43 characters long
T}
\ \ \fBinterval\fR	T{
optional integer, at least 100
T}
_
.T&
li | s
l | l.
Monitor Status
_
\ \ \fBunexpected_remote_mpids\fR	T{
set of integers
T}
\ \ \fBunexpected_remote_maids\fR	T{
set of strings
T}
\ \ \fBfault\fR	T{
optional boolean
T}
.TE
.ST "Monitor Configuration:"
.IP "\fBmpid\fR: integer, in range 1 to 8,191"
A Maintenance Point ID (MPID) uniquely identifies each endpoint within
a Maintenance Association (see \fBma_name\fR).  The MPID is
used to identify this \fBMonitor\fR to other endpoints in the
MA.
.IP "\fBremote_mps\fR: set of \fBMaintenance_Point\fRs"
A set of \fBMaintenance_Points\fR which this
\fBMonitor\fR should have connectivity to.  If this
\fBMonitor\fR does not have connectivity to any MPs in this
set, or has connectivity to any MPs not in this set, a fault is
signaled.
.IP "\fBma_name\fR: optional string, between 1 and 43 characters long"
A Maintenance Association (MA) name pairs with a Maintenance Domain
(MD) name to uniquely identify a MA.  A MA is a group of endpoints who
have complete and exclusive interconnectivity. Defaults to
\fBovs\fR if unset.
.IP "\fBmd_name\fR: optional string, between 1 and 43 characters long"
A Maintenance Domain name pairs with a Maintenance Association name to
uniquely identify a MA. Defaults to \fBovs\fR if unset.
.IP "\fBinterval\fR: optional integer, at least 100"
The transmission interval of CCMs in milliseconds.  Three missed CCMs
indicate a connectivity fault.  Defaults to 1000ms.
.ST "Monitor Status:"
.IP "\fBunexpected_remote_mpids\fR: set of integers"
A set of MPIDs representing MPs to which this \fBMonitor\fR
has detected connectivity that are not in the
\fBremote_mps\fR set.  This \fBMonitor\fR should not
have connectivity to any MPs not listed in \fBremote_mps\fR\.
Thus, if this set is non-empty a fault is indicated.
.IP "\fBunexpected_remote_maids\fR: set of strings"
A set of MAIDs representing foreign Maintenance Associations (MAs)
which this \fBMonitor\fR has detected connectivity to. A
\fBMonitor\fR should not have connectivity to a Maintenance
Association other than its own.  Thus, if this set is non-empty a fault
is indicated.
.IP "\fBfault\fR: optional boolean"
Indicates a Connectivity Fault caused by a configuration error, a down
remote MP, or unexpected connectivity to a remote MAID or remote MP.
.bp
.SS "Maintenance_Point Table"
A \fBMaintenance_Point\fR represents a MP which a
\fBMonitor\fR has or should have connectivity to.
.sp
.ce 1
\fBMaintenance_Point\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
.T&
li | s
l | l.
Maintenance_Point Configuration
_
\ \ \fBmpid\fR	T{
integer, in range 1 to 8,191
T}
_
.T&
li | s
l | l.
Maintenance_Point Status
_
\ \ \fBfault\fR	T{
optional boolean
T}
.TE
.ST "Maintenance_Point Configuration:"
.IP "\fBmpid\fR: integer, in range 1 to 8,191"
A Maintenance Point ID (MPID) uniquely identifies each endpoint within
a Maintenance Association. All MPs within a MA should have a unique
MPID.
.ST "Maintenance_Point Status:"
.IP "\fBfault\fR: optional boolean"
Indicates a connectivity fault.
.bp
.SS "Mirror Table"
A port mirror within a \fBBridge\fR\.
.PP
A port mirror configures a bridge to send selected frames to special
``mirrored\(cq\(cq ports, in addition to their normal destinations.  Mirroring
traffic may also be referred to as SPAN or RSPAN, depending on the
mechanism used for delivery.
.sp
.ce 1
\fBMirror\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBname\fR	T{
string
T}
_
.T&
li | s
l | l.
Selecting Packets for Mirroring
_
\ \ \fBselect_all\fR	T{
boolean
T}
\ \ \fBselect_dst_port\fR	T{
set of weak reference to \fBPort\fRs
T}
\ \ \fBselect_src_port\fR	T{
set of weak reference to \fBPort\fRs
T}
\ \ \fBselect_vlan\fR	T{
set of up to 4096 integers, in range 0 to 4,095
T}
_
.T&
li | s
l | l.
Mirroring Destination Configuration
_
\ \ \fBoutput_port\fR	T{
optional weak reference to \fBPort\fR
T}
\ \ \fBoutput_vlan\fR	T{
optional integer, in range 1 to 4,095
T}
_
.T&
li | s
l | l.
Other Features
_
\ \ \fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBname\fR: string"
Arbitrary identifier for the \fBMirror\fR\.
.ST "Selecting Packets for Mirroring:"
.IP "\fBselect_all\fR: boolean"
If true, every packet arriving or departing on any port is
selected for mirroring.
.IP "\fBselect_dst_port\fR: set of weak reference to \fBPort\fRs"
Ports on which departing packets are selected for mirroring.
.IP "\fBselect_src_port\fR: set of weak reference to \fBPort\fRs"
Ports on which arriving packets are selected for mirroring.
.IP "\fBselect_vlan\fR: set of up to 4096 integers, in range 0 to 4,095"
VLANs on which packets are selected for mirroring.  An empty set
selects packets on all VLANs.
.ST "Mirroring Destination Configuration:"
.IP "\fBoutput_port\fR: optional weak reference to \fBPort\fR"
Output port for selected packets, if nonempty.  Mutually exclusive
with \fBoutput_vlan\fR\.
.IP
Specifying a port for mirror output reserves that port exclusively
for mirroring.  No frames other than those selected for mirroring
will be forwarded to the port, and any frames received on the port
will be discarded.
.IP
This type of mirroring is sometimes called SPAN.
.IP "\fBoutput_vlan\fR: optional integer, in range 1 to 4,095"
Output VLAN for selected packets, if nonempty.  Mutually exclusive
with \fBoutput_port\fR\.
.IP
The frames will be sent out all ports that trunk
\fBoutput_vlan\fR, as well as any ports with implicit VLAN
\fBoutput_vlan\fR\.  When a mirrored frame is sent out a
trunk port, the frame\(cqs VLAN tag will be set to
\fBoutput_vlan\fR, replacing any existing tag; when it is
sent out an implicit VLAN port, the frame will not be tagged.  This
type of mirroring is sometimes called RSPAN.
.IP
\fBPlease note:\fR Mirroring to a VLAN can disrupt a network that
contains unmanaged switches.  Consider an unmanaged physical switch
with two ports: port 1, connected to an end host, and port 2,
connected to an Open vSwitch configured to mirror received packets
into VLAN 123 on port 2.  Suppose that the end host sends a packet on
port 1 that the physical switch forwards to port 2.  The Open vSwitch
forwards this packet to its destination and then reflects it back on
port 2 in VLAN 123.  This reflected packet causes the unmanaged
physical switch to replace the MAC learning table entry, which
correctly pointed to port 1, with one that incorrectly points to port
2.  Afterward, the physical switch will direct packets destined for
the end host to the Open vSwitch on port 2, instead of to the end
host on port 1, disrupting connectivity.  If mirroring to a VLAN is
desired in this scenario, then the physical switch must be replaced
by one that learns Ethernet addresses on a per-VLAN basis.  In
addition, learning should be disabled on the VLAN containing mirrored
traffic. If this is not done then intermediate switches will learn
the MAC address of each end host from the mirrored traffic.  If
packets being sent to that end host are also mirrored, then they will
be dropped since the switch will attempt to send them out the input
port. Disabling learning for the VLAN will cause the switch to
correctly send the packet out all ports configured for that VLAN.  If
Open vSwitch is being used as an intermediate switch, learning can be
disabled by adding the mirrored VLAN to \fBflood_vlans\fR
in the appropriate \fBBridge\fR table or tables.
.ST "Other Features:"
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "Controller Table"
An OpenFlow controller.
.PP
Open vSwitch supports two kinds of OpenFlow controllers:
.RS
.TP
Primary controllers
This is the kind of controller envisioned by the OpenFlow 1.0
specification.  Usually, a primary controller implements a network
policy by taking charge of the switch\(cqs flow table.
.IP
Open vSwitch initiates and maintains persistent connections to
primary controllers, retrying the connection each time it fails or
drops.  The \fBfail_mode\fR column in the
\fBBridge\fR table applies to primary controllers.
.IP
Open vSwitch permits a bridge to have any number of primary
controllers.  When multiple controllers are configured, Open
vSwitch connects to all of them simultaneously.  Because
OpenFlow 1.0 does not specify how multiple controllers
coordinate in interacting with a single switch, more than
one primary controller should be specified only if the
controllers are themselves designed to coordinate with each
other.  (The Nicira-defined \fBNXT_ROLE\fR OpenFlow
vendor extension may be useful for this.)
.TP
Service controllers
These kinds of OpenFlow controller connections are intended for
occasional support and maintenance use, e.g. with
\fBovs\-ofctl\fR\.  Usually a service controller connects only
briefly to inspect or modify some of a switch\(cqs state.
.IP
Open vSwitch listens for incoming connections from service
controllers.  The service controllers initiate and, if necessary,
maintain the connections from their end.  The \fBfail_mode\fR column in the \fBBridge\fR table does
not apply to service controllers.
.IP
Open vSwitch supports configuring any number of service controllers.
.RE
.PP
The \fBtarget\fR determines the type of controller.
.sp
.ce 1
\fBController\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
.T&
li | s
l | l.
Core Features
_
\ \ \fBtarget\fR	T{
string
T}
\ \ \fBconnection_mode\fR	T{
optional string, either \fBin\-band\fR or \fBout\-of\-band\fR
T}
_
.T&
li | s
l | l.
Controller Failure Detection and Handling
_
\ \ \fBmax_backoff\fR	T{
optional integer, at least 1,000
T}
\ \ \fBinactivity_probe\fR	T{
optional integer
T}
_
.T&
li | s
l | l.
OpenFlow Rate Limiting
_
\ \ \fBcontroller_rate_limit\fR	T{
optional integer, at least 100
T}
\ \ \fBcontroller_burst_limit\fR	T{
optional integer, at least 25
T}
_
.T&
li | s
l | l.
Additional Discovery Configuration
_
\ \ \fBdiscover_accept_regex\fR	T{
optional string
T}
\ \ \fBdiscover_update_resolv_conf\fR	T{
optional boolean
T}
_
.T&
li | s
l | l.
Additional In-Band Configuration
_
\ \ \fBlocal_ip\fR	T{
optional string
T}
\ \ \fBlocal_netmask\fR	T{
optional string
T}
\ \ \fBlocal_gateway\fR	T{
optional string
T}
_
.T&
li | s
l | l.
Other Features
_
\ \ \fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.ST "Core Features:"
.IP "\fBtarget\fR: string"
Connection method for controller.
.IP
The following connection methods are currently supported for primary
controllers:
.RS
.TP
\fBssl:\fIip\fB\fR[\fB:\fIport\fB\fR]
The specified SSL \fIport\fR (default: 6633) on the host at
the given \fIip\fR, which must be expressed as an IP address
(not a DNS name).  The \fBssl\fR
column in the \fBOpen_vSwitch\fR table must point to a
valid SSL configuration when this form is used.
.IP
SSL support is an optional feature that is not always built as
part of Open vSwitch.
.TP
\fBtcp:\fIip\fB\fR[\fB:\fIport\fB\fR]
The specified TCP \fIport\fR (default: 6633) on the host at
the given \fIip\fR, which must be expressed as an IP address
(not a DNS name).
.TP
\fBdiscover\fR
Enables controller discovery.
.IP
In controller discovery mode, Open vSwitch broadcasts a DHCP
request with vendor class identifier \fBOpenFlow\fR across
all of the bridge\(cqs network devices.  It will accept any valid
DHCP reply that has the same vendor class identifier and includes
a vendor-specific option with code 1 whose contents are a string
specifying the location of the controller in the same format as
\fBtarget\fR\.
.IP
The DHCP reply may also, optionally, include a vendor-specific
option with code 2 whose contents are a string specifying the URI
to the base of the OpenFlow PKI
(e.g. \fBhttp://192.168.0.1/openflow/pki\fR).  This URI is
used only for bootstrapping the OpenFlow PKI at initial switch
setup; \fBovs\-vswitchd\fR does not use it at all.
.RE
.IP
The following connection methods are currently supported for service
controllers:
.RS
.TP
\fBpssl:\fR[\fIport\fR][\fB:\fIip\fB\fR]
Listens for SSL connections on the specified TCP \fIport\fR
(default: 6633).  If \fIip\fR, which must be expressed as an
IP address (not a DNS name), is specified, then connections are
restricted to the specified local IP address.
.IP
The \fBssl\fR column in the \fBOpen_vSwitch\fR table must point to a valid SSL
configuration when this form is used.
.IP
SSL support is an optional feature that is not always built as
part of Open vSwitch.
.TP
\fBptcp:\fR[\fIport\fR][\fB:\fIip\fB\fR]
Listens for connections on the specified TCP \fIport\fR
(default: 6633).  If \fIip\fR, which must be expressed as an
IP address (not a DNS name), is specified, then connections are
restricted to the specified local IP address.
.RE
.IP
When multiple controllers are configured for a single bridge, the
\fBtarget\fR values must be unique.  Duplicate
\fBtarget\fR values yield unspecified results.
.IP "\fBconnection_mode\fR: optional string, either \fBin\-band\fR or \fBout\-of\-band\fR"
If it is specified, this setting must be one of the following
strings that describes how Open vSwitch contacts this OpenFlow
controller over the network:
.RS
.TP
\fBin\-band\fR
In this mode, this controller\(cqs OpenFlow traffic travels over the
bridge associated with the controller.  With this setting, Open
vSwitch allows traffic to and from the controller regardless of the
contents of the OpenFlow flow table.  (Otherwise, Open vSwitch
would never be able to connect to the controller, because it did
not have a flow to enable it.)  This is the most common connection
mode because it is not necessary to maintain two independent
networks.
.TP
\fBout\-of\-band\fR
In this mode, OpenFlow traffic uses a control network separate
from the bridge associated with this controller, that is, the
bridge does not use any of its own network devices to communicate
with the controller.  The control network must be configured
separately, before or after \fBovs\-vswitchd\fR is started.
.RE
.IP
If not specified, the default is implementation-specific.  If
\fBtarget\fR is \fBdiscover\fR, the connection mode
is always treated as \fBin\-band\fR regardless of the actual
setting.
.ST "Controller Failure Detection and Handling:"
.IP "\fBmax_backoff\fR: optional integer, at least 1,000"
Maximum number of milliseconds to wait between connection attempts.
Default is implementation-specific.
.IP "\fBinactivity_probe\fR: optional integer"
Maximum number of milliseconds of idle time on connection to
controller before sending an inactivity probe message.  If Open
vSwitch does not communicate with the controller for the specified
number of seconds, it will send a probe.  If a response is not
received for the same additional amount of time, Open vSwitch
assumes the connection has been broken and attempts to reconnect.
Default is implementation-specific.
.ST "OpenFlow Rate Limiting:"
.IP "\fBcontroller_rate_limit\fR: optional integer, at least 100"
The maximum rate at which packets in unknown flows will be
forwarded to the OpenFlow controller, in packets per second.  This
feature prevents a single bridge from overwhelming the controller.
If not specified, the default is implementation-specific.
.IP
In addition, when a high rate triggers rate-limiting, Open
vSwitch queues controller packets for each port and transmits
them to the controller at the configured rate.  The number of
queued packets is limited by
the \fBcontroller_burst_limit\fR value.  The packet
queue is shared fairly among the ports on a bridge.
.IP
Open
vSwitch maintains two such packet rate-limiters per bridge.
One of these applies to packets sent up to the controller
because they do not correspond to any flow.  The other applies
to packets sent up to the controller by request through flow
actions. When both rate-limiters are filled with packets, the
actual rate that packets are sent to the controller is up to
twice the specified rate.
.IP "\fBcontroller_burst_limit\fR: optional integer, at least 25"
In conjunction with \fBcontroller_rate_limit\fR,
the maximum number of unused packet credits that the bridge will
allow to accumulate, in packets.  If not specified, the default
is implementation-specific.
.ST "Additional Discovery Configuration:"
These values are considered only when \fBtarget\fR
is \fBdiscover\fR\.
.IP "\fBdiscover_accept_regex\fR: optional string"
A POSIX
extended regular expression against which the discovered controller
location is validated.  The regular expression is implicitly
anchored at the beginning of the controller location string, as
if it begins with \fB^\fR\.  If not specified, the default
is implementation-specific.
.IP "\fBdiscover_update_resolv_conf\fR: optional boolean"
Whether to update \fB/etc/resolv.conf\fR when the
controller is discovered.  If not specified, the default
is implementation-specific.  Open vSwitch will only modify
\fB/etc/resolv.conf\fR if the DHCP response that it receives
specifies one or more DNS servers.
.ST "Additional In-Band Configuration:"
These values are considered only in in-band control mode (see
\fBconnection_mode\fR) and only when \fBtarget\fR
is not \fBdiscover\fR\.  (For controller discovery, the network
configuration obtained via DHCP is used instead.)
.PP
When multiple controllers are configured on a single bridge, there
should be only one set of unique values in these columns.  If different
values are set for these columns in different controllers, the effect
is unspecified.
.IP "\fBlocal_ip\fR: optional string"
The IP address to configure on the local port,
e.g. \fB192.168.0.123\fR\.  If this value is unset, then
\fBlocal_netmask\fR and \fBlocal_gateway\fR are
ignored.
.IP "\fBlocal_netmask\fR: optional string"
The IP netmask to configure on the local port,
e.g. \fB255.255.255.0\fR\.  If \fBlocal_ip\fR is set
but this value is unset, then the default is chosen based on whether
the IP address is class A, B, or C.
.IP "\fBlocal_gateway\fR: optional string"
The IP address of the gateway to configure on the local port, as a
string, e.g. \fB192.168.0.1\fR\.  Leave this column unset if
this network has no gateway.
.ST "Other Features:"
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "Manager Table"
Configuration for a database connection to an Open vSwitch database
(OVSDB) client.
.PP
This table primarily configures the Open vSwitch database
(\fBovsdb\-server\fR), not the Open vSwitch switch
(\fBovs\-vswitchd\fR).  The switch does read the table to determine
what connections should be treated as in-band.
.PP
The Open vSwitch database server can initiate and maintain active
connections to remote clients.  It can also listen for database
connections.
.sp
.ce 1
\fBManager\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
.T&
li | s
l | l.
Core Features
_
\ \ \fBtarget\fR	T{
string
T}
\ \ \fBconnection_mode\fR	T{
optional string, either \fBin\-band\fR or \fBout\-of\-band\fR
T}
_
.T&
li | s
l | l.
Client Failure Detection and Handling
_
\ \ \fBmax_backoff\fR	T{
optional integer, at least 1,000
T}
\ \ \fBinactivity_probe\fR	T{
optional integer
T}
_
.T&
li | s
l | l.
Other Features
_
\ \ \fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.ST "Core Features:"
.IP "\fBtarget\fR: string"
Connection method for managers.
.IP
The following connection methods are currently supported:
.RS
.TP
\fBssl:\fIip\fB\fR[\fB:\fIport\fB\fR]
The specified SSL \fIport\fR (default: 6632) on the host at
the given \fIip\fR, which must be expressed as an IP address
(not a DNS name).  The \fBssl\fR
column in the \fBOpen_vSwitch\fR table must point to a
valid SSL configuration when this form is used.
.IP
SSL support is an optional feature that is not always built as
part of Open vSwitch.
.TP
\fBtcp:\fIip\fB\fR[\fB:\fIport\fB\fR]
The specified TCP \fIport\fR (default: 6632) on the host at
the given \fIip\fR, which must be expressed as an IP address
(not a DNS name).
.TP
\fBpssl:\fR[\fIport\fR][\fB:\fIip\fB\fR]
Listens for SSL connections on the specified TCP \fIport\fR
(default: 6632).  If \fIip\fR, which must be expressed as an
IP address (not a DNS name), is specified, then connections are
restricted to the specified local IP address.
.IP
The \fBssl\fR column in the \fBOpen_vSwitch\fR table must point to a valid SSL
configuration when this form is used.
.IP
SSL support is an optional feature that is not always built as
part of Open vSwitch.
.TP
\fBptcp:\fR[\fIport\fR][\fB:\fIip\fB\fR]
Listens for connections on the specified TCP \fIport\fR
(default: 6632).  If \fIip\fR, which must be expressed as an
IP address (not a DNS name), is specified, then connections are
restricted to the specified local IP address.
.RE
.IP
When multiple managers are configured, the \fBtarget\fR
values must be unique.  Duplicate \fBtarget\fR values yield
unspecified results.
.IP "\fBconnection_mode\fR: optional string, either \fBin\-band\fR or \fBout\-of\-band\fR"
If it is specified, this setting must be one of the following strings
that describes how Open vSwitch contacts this OVSDB client over the
network:
.RS
.TP
\fBin\-band\fR
In this mode, this connection\(cqs traffic travels over a bridge
managed by Open vSwitch.  With this setting, Open vSwitch allows
traffic to and from the client regardless of the contents of the
OpenFlow flow table.  (Otherwise, Open vSwitch would never be able
to connect to the client, because it did not have a flow to enable
it.)  This is the most common connection mode because it is not
necessary to maintain two independent networks.
.TP
\fBout\-of\-band\fR
In this mode, the client\(cqs traffic uses a control network separate
from that managed by Open vSwitch, that is, Open vSwitch does not
use any of its own network devices to communicate with the client.
The control network must be configured separately, before or after
\fBovs\-vswitchd\fR is started.
.RE
.IP
If not specified, the default is implementation-specific.
.ST "Client Failure Detection and Handling:"
.IP "\fBmax_backoff\fR: optional integer, at least 1,000"
Maximum number of milliseconds to wait between connection attempts.
Default is implementation-specific.
.IP "\fBinactivity_probe\fR: optional integer"
Maximum number of milliseconds of idle time on connection to the client
before sending an inactivity probe message.  If Open vSwitch does not
communicate with the client for the specified number of seconds, it
will send a probe.  If a response is not received for the same
additional amount of time, Open vSwitch assumes the connection has been
broken and attempts to reconnect.  Default is implementation-specific.
.ST "Other Features:"
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "NetFlow Table"
A NetFlow target.  NetFlow is a protocol that exports a number of
details about terminating IP flows, such as the principals involved
and duration.
.sp
.ce 1
\fBNetFlow\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBtargets\fR	T{
set of 1 or more strings
T}
\fBengine_id\fR	T{
optional integer, in range 0 to 255
T}
\fBengine_type\fR	T{
optional integer, in range 0 to 255
T}
\fBactive_timeout\fR	T{
integer, at least -1
T}
\fBadd_id_to_interface\fR	T{
boolean
T}
\fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBtargets\fR: set of 1 or more strings"
NetFlow targets in the form
\fB\fIip\fB:\fIport\fB\fR\.  The \fIip\fR
must be specified numerically, not as a DNS name.
.IP "\fBengine_id\fR: optional integer, in range 0 to 255"
Engine ID to use in NetFlow messages.  Defaults to datapath index
if not specified.
.IP "\fBengine_type\fR: optional integer, in range 0 to 255"
Engine type to use in NetFlow messages.  Defaults to datapath
index if not specified.
.IP "\fBactive_timeout\fR: integer, at least -1"
The interval at which NetFlow records are sent for flows that are
still active, in seconds.  A value of \fB0\fR requests the
default timeout (currently 600 seconds); a value of \fB\-1\fR
disables active timeouts.
.IP "\fBadd_id_to_interface\fR: boolean"
If this column\(cqs value is \fBfalse\fR, the ingress and egress
interface fields of NetFlow flow records are derived from OpenFlow port
numbers.  When it is \fBtrue\fR, the 7 most significant bits of
these fields will be replaced by the least significant 7 bits of the
engine id.  This is useful because many NetFlow collectors do not
expect multiple switches to be sending messages from the same host, so
they do not store the engine information which could be used to
disambiguate the traffic.
.IP
When this option is enabled, a maximum of 508 ports are supported.
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "SSL Table"
SSL configuration for an Open_vSwitch.
.sp
.ce 1
\fBSSL\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBprivate_key\fR	T{
string
T}
\fBcertificate\fR	T{
string
T}
\fBca_cert\fR	T{
string
T}
\fBbootstrap_ca_cert\fR	T{
boolean
T}
\fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBprivate_key\fR: string"
Name of a PEM file containing the private key used as the switch\(cqs
identity for SSL connections to the controller.
.IP "\fBcertificate\fR: string"
Name of a PEM file containing a certificate, signed by the
certificate authority (CA) used by the controller and manager,
that certifies the switch\(cqs private key, identifying a trustworthy
switch.
.IP "\fBca_cert\fR: string"
Name of a PEM file containing the CA certificate used to verify
that the switch is connected to a trustworthy controller.
.IP "\fBbootstrap_ca_cert\fR: boolean"
If set to \fBtrue\fR, then Open vSwitch will attempt to
obtain the CA certificate from the controller on its first SSL
connection and save it to the named PEM file. If it is successful,
it will immediately drop the connection and reconnect, and from then
on all SSL connections must be authenticated by a certificate signed
by the CA certificate thus obtained.  \fBThis option exposes the
SSL connection to a man\-in\-the\-middle attack obtaining the initial
CA certificate.\fR  It may still be useful for bootstrapping.
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "sFlow Table"
An sFlow(R) target.  sFlow is a protocol for remote monitoring
of switches.
.sp
.ce 1
\fBsFlow\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBagent\fR	T{
optional string
T}
\fBheader\fR	T{
optional integer
T}
\fBpolling\fR	T{
optional integer
T}
\fBsampling\fR	T{
optional integer
T}
\fBtargets\fR	T{
set of 1 or more strings
T}
\fBexternal_ids\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBagent\fR: optional string"
Name of the network device whose IP address should be reported as the
``agent address\(cq\(cq to collectors.  If not specified, the IP address
defaults to the \fBlocal_ip\fR in the
collector\(cqs \fBController\fR\.  If an agent IP address cannot be
determined either way, sFlow is disabled.
.IP "\fBheader\fR: optional integer"
Number of bytes of a sampled packet to send to the collector.
If not specified, the default is 128 bytes.
.IP "\fBpolling\fR: optional integer"
Polling rate in seconds to send port statistics to the collector.
If not specified, defaults to 30 seconds.
.IP "\fBsampling\fR: optional integer"
Rate at which packets should be sampled and sent to the collector.
If not specified, defaults to 400, which means one out of 400
packets, on average, will be sent to the collector.
.IP "\fBtargets\fR: set of 1 or more strings"
sFlow targets in the form
\fB\fIip\fB:\fIport\fB\fR\.
.IP "\fBexternal_ids\fR: map of string-string pairs"
Key-value pairs for use by external frameworks that integrate with Open
vSwitch, rather than by Open vSwitch itself.  System integrators should
either use the Open vSwitch development mailing list to coordinate on
common key-value definitions, or choose key names that are likely to be
unique.  No common key-value pairs are currently defined.
.bp
.SS "Capability Table"
Records in this table describe functionality supported by the hardware
and software platform on which this Open vSwitch is based.  Clients
should not modify this table.
.PP
A record in this table is meaningful only if it is referenced by the
\fBcapabilities\fR column in the
\fBOpen_vSwitch\fR table.  The key used to reference it, called
the record\(cqs ``category,\(cq\(cq determines the meanings of the
\fBdetails\fR column.  The following general forms of
categories are currently defined:
.RS
.TP
\fBqos\-\fItype\fB\fR
\fItype\fR is supported as the value for
\fBtype\fR in the \fBQoS\fR table.
.RE
.sp
.ce 1
\fBCapability\fR Table Columns:
.TS
center box;
l | l.
Column	Type
=
\fBdetails\fR	T{
map of string-string pairs
T}
.TE
.IP "\fBdetails\fR: map of string-string pairs"
Key-value pairs that describe capabilities.  The meaning of the pairs
depends on the category key that the \fBcapabilities\fR column in the \fBOpen_vSwitch\fR table
uses to reference this record, as described above.
.IP
The presence of a record for category \fBqos\-\fItype\fB\fR
indicates that the switch supports \fItype\fR as the value of
the \fBtype\fR column in the \fBQoS\fR
table.  The following key-value pairs are defined to further describe
QoS capabilities:
.RS
.TP
\fBn\-queues\fR
Number of supported queues, as a positive integer.  Keys in the
\fBqueues\fR column for \fBQoS\fR
records whose \fBtype\fR value
equals \fItype\fR must range between 0 and this value minus one,
inclusive.
.RE
